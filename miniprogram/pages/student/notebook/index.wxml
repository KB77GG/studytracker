<view class="page">
  <view class="page-header">
    <view class="title">错词本</view>
    <view class="count">共 {{list.length}} 词</view>
  </view>

  <!-- 上次错词快捷入口 -->
  <view wx:if="{{lastWrongCount > 0}}" class="last-wrong-banner" bindtap="retryLastWrong">
    <view class="banner-left">
      <view class="banner-icon">🔄</view>
      <view class="banner-text">
        <text class="banner-title">上次练习错词</text>
        <text class="banner-desc">{{lastWrongCount}} 个单词待巩固</text>
      </view>
    </view>
    <view class="banner-btn">立即重练</view>
  </view>

  <view wx:if="{{!list.length && !isLoading}}" class="empty">
    <text>还没有错词记录</text>
  </view>

  <scroll-view wx:else scroll-y class="list">
    <view class="card" wx:for="{{list}}" wx:key="word">
      <view class="card-header">
        <view class="word">{{item.word}}</view>
        <view class="phonetic">[{{item.phonetic || '-'}}]</view>
      </view>
      <view class="trans">{{item.translation || '暂无释义'}}</view>
      <view class="card-actions">
        <button size="mini" class="ghost" data-word="{{item.word}}" bindtap="playWord">播放</button>
        <button size="mini" class="danger" data-word="{{item.word}}" bindtap="deleteItem">删除</button>
      </view>
    </view>
  </scroll-view>

  <view class="footer">
    <button wx:if="{{list.length >= 2}}" class="retry-all-btn" bindtap="retryAllNotebook">重练全部错词</button>
    <button class="clear-btn" bindtap="clearAll">清空错词本</button>
  </view>
</view>
