{% extends "base.html" %}

{% block page_title %}ä½œä¸šæ‰¹æ”¹{% endblock %}
{% block page_subtitle %}Grading Center{% endblock %}

{% block content_dashboard %}
<div class="card">
    <div class="card-header">
        <h3>å¾…æ‰¹æ”¹ä½œä¸š</h3>
        <div class="filters">
            <!-- Future filters can go here -->
        </div>
    </div>
    <div class="card-body">
        <table class="table">
            <thead>
                <tr>
                    <th>æäº¤æ—¶é—´</th>
                    <th>å­¦ç”Ÿ</th>
                    <th>ä»»åŠ¡å†…å®¹</th>
                    <th>ææ–™ç±»å‹</th>
                    <th>çŠ¶æ€</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for task in tasks %}
                <tr>
                    <td>{{ task.submitted_at.strftime('%Y-%m-%d %H:%M') if task.submitted_at else 'Unknown' }}</td>
                    <td>{{ task.student_name }}</td>
                    <td>
                        <div class="text-truncate" style="max-width: 300px;">
                            {{ task.detail }}
                        </div>
                        {% if task.category %}
                        <span class="badge badge-sm badge-outline">{{ task.category }}</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if task.grading_mode == 'material' %}
                        <span class="badge badge-purple">ææ–™åº“</span>
                        {% else %}
                        <span class="badge badge-blue">å›¾ç‰‡/éŸ³é¢‘</span>
                        {% endif %}
                    </td>
                    <td>
                        <span class="status-dot status-warning"></span> å¾…æ‰¹æ”¹
                    </td>
                    <td>
                        <a href="{{ url_for('grading_detail', task_id=task.id) }}" class="btn btn-sm btn-primary">
                            æ‰¹æ”¹
                        </a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6" class="text-center py-5 text-muted">
                        ğŸ‰ å¤ªæ£’äº†ï¼æ‰€æœ‰ä½œä¸šéƒ½å·²æ‰¹æ”¹å®Œæˆã€‚
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
    .badge-purple {
        background-color: #f3e8ff;
        color: #7e22ce;
    }

    .badge-blue {
        background-color: #e0f2fe;
        color: #0369a1;
    }

    .text-truncate {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>
{% endblock %}